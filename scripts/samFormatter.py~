import sys

from BitVector import BV

def extractMEMs(string):
    mems = []
    string_mems = string.split(" ")
    for s_mem in string_mems:
        mems.append([int(n) for n in s_mem[1:-1].split(",")])
    return mems

def main(path):
    with open("../tmp/T.fa") as t:
        text = t.read().split("\n")[1]
        bv = BV(text) #bv.rank, bv.select
    print(bv)
    
    with open("../tmp/e_pos") as f:
        exs_pos = []
        for line in f.read().split("\n"):
            exs_pos.append([int(n) for n in line.split(",")])

    print(exs_pos)

    mems = extractMEMs(path)
    print(mems)
    i = 0
    CIGAR = ""
    matches = 0
    while i<len(mems):
        if i == 0:
            if mems[i][1] != 1:
                print("{}S".format(mems[i][1]))
                matches = 0
            matches += mems[i][2]
        else:
            if BV.rank(mems[i-1][0]) ==  BV.rank(mems[i][0]):
                #mems[i-1][1] + mems[i-1][2] == mems[i][1]:
                matches += mems[i][2]
                
        i+=1

if __name__ == '__main__':
    main("(559,1,14) (574,16,8) (583,25,53)")
 
